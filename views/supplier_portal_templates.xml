<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="portal_layout">
        <t t-call="web.frontend_layout">
            <t t-set="no_header" t-value="True"/>
            <t t-set="no_footer" t-value="True"/>

            <t t-set="head">
                <!-- JS/CSS del portal (website) -->
                <t t-call-assets="web.assets_frontend" t-css="true" t-js="true"/>

                <!-- QWeb/OWL templates (NECESARIO para evitar: Missing template ...) -->
                <t t-call-assets="web.assets_qweb" t-js="true"/>

                <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600" rel="stylesheet"/>
            </t>

            <div class="supplier-portal-body">
                <t t-out="0"/>
            </div>
        </t>
    </template>

    <template id="supplier_portal_view">
        <t t-call="stock_lot_packing_import.portal_layout">
            <script type="text/javascript">
                window.portalData = {
                    products: <t t-raw="products_json"/>,
                    token: '<t t-esc="token"/>',
                    poName: '<t t-esc="picking.origin or &#34;&#34;"/>',
                    pickingName: '<t t-esc="picking.name"/>'
                };
            </script>

            <!-- Fallback visible mientras monta OWL -->
            <div class="container py-5 text-center text-light">
                <div class="mb-3" style="opacity:0.85;">
                    Cargando portal…
                </div>
                <div class="small" style="opacity:0.6;">
                    Si esta pantalla no avanza, revise que los assets estén cargando correctamente.
                </div>
            </div>

            <div id="supplier-portal-app"/>
        </t>
    </template>

    <template id="portal_not_found">
        <t t-call="stock_lot_packing_import.portal_layout">
            <div class="container text-center py-5">
                <h1 class="display-1 text-danger">404</h1>
                <p class="lead">Enlace no válido.</p>
            </div>
        </t>
    </template>

    <template id="portal_expired">
        <t t-call="stock_lot_packing_import.portal_layout">
            <div class="container text-center py-5">
                <h1 class="display-1 text-warning">
                    <i class="fa fa-clock-o"/>
                </h1>
                <p class="lead">Este enlace ha expirado.</p>
            </div>
        </t>
    </template>
</odoo>
